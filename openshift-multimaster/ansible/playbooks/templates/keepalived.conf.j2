global_defs {
    router_id           ovp_vrrp
}

vrrp_script haproxy_check {
    script              "killall -0 haproxy"
    interval            2
    weight              2
}

vrrp_instance OCP_Ext {
    interface           eth1
    virtual_router_id   51
    priority            xxx
    virtual_ipaddress   {
        {{ openshift_master_cluster_public_ip }} dev eth0
    }
    track_script {
        haproxy_check
    }
    authentication {
        auth_type       PASS
        auth_pass       lc0VfENu//5hdUvHEQ=
    }
}

vrrp_instance OCP_Int {
    interface           eth1
    virtual_router_id   52
    priority            xxx
    virtual_ipaddress   {
        {{ openshift_master_cluter_ip }} dev eth1 
    }
    track_script {
        haproxy_check
    }
    authentication {
        auth_type       PASS
        auth_pass       lc0VfENu//5hdUvHEQ=
    }
}



# vrrp_instance VI_1 {
# {% if servers[0] == inventory_hostname %}
#     state MASTER
# {% else %}
#     state BACKUP
# {% endif %}
# 
#     virtual_router_id 51
#     interface eth1
#     advert_int 1
#     unicast_peer {
# {% for server in servers %}
#         {{ hostvars[server].openshift_ip }}
# {% endfor %}
#     }
#     authentication {
#         auth_type PASS
#         auth_pass VeryVerySecuryPassword
#     }
#     virtual_ipaddress {
#         {{ openshift_master_cluter_ip }}
#     }
# }
# 
